(()=>{"use strict";const t="--_masonry-layout-col-count",e="--_masonry-layout-gap",n=document.createElement("template");n.innerHTML=`\n    <style>\n      :host {\n        display: flex;\n        align-items: flex-start;\n        justify-content: stretch;\n      }\n      .column {\n      max-width: calc((100% / var(${t}, 1) - ((var(${e}, 24px) * (var(${t}, 1) - 1) / var(${t}, 1)))));\n      width: 100%;\n        flex: 1;\n        display: flex;\n        flex-direction: column;\n      }\n      .column:not(:last-child) {\n        margin-right: var(${e}, 24px);\n      }\n      .column ::slotted(*) {\n        margin-bottom: var(${e}, 24px);\n        box-sizing: border-box;\n        width: 100%;\n      }\n      #unset-items {\n        opacity: 0;\n        position: absolute;\n        pointer-events: none;\n      }\n    </style>\n    <div id="unset-items">\n      <slot></slot>\n    </div>\n  `;const s=(t,e,n)=>{const s=parseFloat(t.getAttribute(e)||"");return isNaN(s)?n:s},o=(t,e,n)=>isNaN(e)?Math.max(1,Math.ceil(t/n)):e,i=t=>{let e=0,n=1/0;return t.forEach(((t,s)=>{t<n&&(n=t,e=s)})),e};class l extends HTMLElement{static get observedAttributes(){return["maxcolwidth","gap","cols"]}set maxColWidth(t){this.setAttribute("maxcolwidth",t.toString())}get maxColWidth(){return s(this,"maxcolwidth",500)}set cols(t){this.setAttribute("cols",t.toString())}get cols(){return s(this,"cols","auto")}set gap(t){this.setAttribute("gap",t.toString())}get gap(){return s(this,"gap",24)}set debounce(t){this.setAttribute("debounce",t.toString())}get debounce(){return s(this,"debounce",300)}get $columns(){return Array.from(this.shadowRoot.querySelectorAll(".column"))}debounceId=`layout_${Math.random()}`;$unsetElementsSlot;ro=void 0;currentRequestAnimationFrameCallback=void 0;constructor(){super(),this.attachShadow({mode:"open"}).appendChild(n.content.cloneNode(!0)),this.onSlotChange=this.onSlotChange.bind(this),this.onResize=this.onResize.bind(this),this.layout=this.layout.bind(this),this.$unsetElementsSlot=this.shadowRoot.querySelector("#unset-items > slot")}connectedCallback(){this.$unsetElementsSlot.addEventListener("slotchange",this.onSlotChange),"ResizeObserver"in window?(this.ro=new ResizeObserver(this.onResize),this.ro.observe(this)):window.addEventListener("resize",this.onResize)}disconnectedCallback(){this.$unsetElementsSlot.removeEventListener("slotchange",this.onSlotChange),window.removeEventListener("resize",this.onResize),null!=this.ro&&this.ro.unobserve(this)}attributeChangedCallback(t){"gap"===t&&this.style.setProperty(e,`${this.gap}px`),this.scheduleLayout()}onSlotChange(){(this.$unsetElementsSlot.assignedNodes()||[]).filter((t=>1===t.nodeType)).length>0&&this.layout()}onResize(t){const{width:e}=null!=t&&Array.isArray(t)&&t.length>0?t[0].contentRect:{width:this.offsetWidth};o(e,this.cols,this.maxColWidth)!==this.$columns.length&&this.scheduleLayout()}renderCols(e){const n=this.$columns;if(n.length!==e){for(const t of n)t.parentNode&&t.parentNode.removeChild(t);for(let t=0;t<e;t++){const e=document.createElement("div");e.classList.add("column"),e.setAttribute("part",`column column-${t}`);const n=document.createElement("slot");n.setAttribute("name",t.toString()),e.appendChild(n),this.shadowRoot.appendChild(e)}this.style.setProperty(t,e.toString())}}scheduleLayout(t=this.debounce){((t,e,n)=>{const s=new Map,o=s.get(n);null!=o&&window.clearTimeout(o),s.set(n,window.setTimeout(t,e))})(this.layout,t,this.debounceId)}layout(){null!=this.currentRequestAnimationFrameCallback&&window.cancelAnimationFrame(this.currentRequestAnimationFrameCallback),this.currentRequestAnimationFrameCallback=requestAnimationFrame((()=>{const t=this.gap,e=Array.from(this.children).filter((t=>1===t.nodeType)),n=o(this.offsetWidth,this.cols,this.maxColWidth),s=Array(n).fill(0),l=[];for(const n of e){const e=n.getBoundingClientRect().height;let o=i(s);s[o]+=e+t;const r=o.toString();n.slot!==r&&l.push((()=>n.slot=r))}for(const t of l)t();this.renderCols(n)}))}}customElements.define("masonry-layout",l)})();